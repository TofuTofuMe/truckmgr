<table class="table is-bordered has-text-centered">
    <thead>
        <% if (table == 'trucks') { %>
            <tr>
                <!-- <th>Select</th> -->
                <th>Plate No.</th>
                <th>Year Model</th>
                <th>MV File No.</th>
                <th>OR No.</th>
                <th>Make</th>
                <th>Type</th>
            </tr>
        <% }; %>
        <% if (table == 'trips') { %>
            <tr>
                <!-- <th>Select</th> -->
                <th>Trip No.</th>
                <th>Plate No.</th>
                <th>Date</th>
                <th>Account</th>
                <th>Route</th>
                <th>Origin</th>
                <th>Destination</th>
                <th>Trip Mileage</th>
                <th>Total Mileage</th>
            </tr>
        <% }; %>
        <% if (table == 'maintenance') { %>
            <tr>
                <th>Job Order No.</th>
                <th>Plate No.</th>
                <th>Date</th>
                <th>Description</th>
                <th>Notes</th>
                <th>PMS</th>
            </tr>
        <% }; %>
    </thead>
    <tbody id="table-body">
    </tbody>
</table>
<script>
    var vehicleArray = [];
    var vehicleRow = 0;
    document.addEventListener('DOMContentLoaded', function(event) {
        switch ('<%= table %>') {
            case 'trucks':
                vehicle_data = new Request('/trucks/list_trucks', {method: 'GET'});
                break;
            case 'trips':
                vehicle_data = new Request('/trips/list_trips', {method: 'GET'});
                break;
            case 'maintenance':
                vehicle_data = new Request('/maintenance/list_maintenance', {method: 'GET'});
                break;
            default:
                {}
        }
        tableBody = document.querySelector('#table-body');
        fetch(vehicle_data).then((response) => {
            response.json().then(data => {
                vehicleArray = data;

                if (vehicleArray.length === 0) {
                    vehicleArray.push({
                        blankmsg: 'No data available'
                    })
                }

                vehicleArray.forEach(vehicle => {
                    const tableRow = document.createElement('tr');
                    for (const data in vehicle) {
                        const tableData = document.createElement('td');
                        tableData.setAttribute('id', `${data}-${vehicleRow}`);
                        tableData.textContent = vehicle[data];
                        tableRow.appendChild(tableData);
                    }
                    tableRow.setAttribute('id', `vehicle-${vehicleRow}`);
                    tableBody.appendChild(tableRow);
                    vehicleRow++;
                })
            })
        });
    })
</script>
